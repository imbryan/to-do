{% extends 'base.html' %}

{% block header %}
    <h3>{% block title %}My List{% endblock %}</h3>
{% endblock %}

{% block content %}
    {% if todos %}
        <ul>
        {% if g.user %}
        {% for todo in todos %}
            <li>
            <form method="post" action="{{ url_for('change', id=todo.id) }}">
                <input type="submit" value="Mark Complete" id="complete" name="complete">
                <input name="todotext" id="todotext" value="{{ todo.text }}" required>
                <input type="submit" value="Update" id="update" name="update">
                <input type="submit" value="Delete" name="delete" onclick="return confirm('Confirm deletion?');">
            </form></li>
        {% endfor %}{% endif %}</ul>
    {% else %}
        <p>There are no to-do items to show.
            {% if not g.user %}<a href="{{ url_for('auth.login') }}">Login</a>?{% endif %}</p>
    {% endif %}

    {% if g.user %}
        {% if complete %}
        <h4>Completed</h4><ul>
        {% for todo in complete %}
            <li><form method="post" action="{{ url_for('change', id=todo.id) }}">
                <input type="submit" value="Mark Incomplete" id="restore" name="restore"> {{ todo.text }}</form></li>
        {% endfor %}</ul>
        {% endif %}

        <form method="post">
            <label for="add">New to-do item: </label>
            <input name="new" id="new" required>
            <input type="submit" value="Add">
        </form>
    {% endif %}
{% endblock %}